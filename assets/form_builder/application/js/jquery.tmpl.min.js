(function(z){var F=z.fn.domManip,C="_tmplitem",I=/^[^<]*(<[\w\W]+>)[^>]*$|\{\{\! /,V={},A={},D,H={key:0,data:{}},P=0,y=0,T=[];function B(b,a,j,h){var f={data:h||(a?a.data:{}),_wrap:a?a._wrap:null,tmpl:null,parent:a||null,nodes:[],calls:M,nest:K,wrap:E,html:J,update:L};b&&z.extend(f,b,{nodes:[],parent:a});if(j){f.tmpl=j;f._ctnt=f._ctnt||f.tmpl(z,f);f.key=++P;(T.length?A:V)[P]=f}return f}z.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){z.fn[a]=function(p){var c=[],o=z(p),e,f,r,q,d=this.length===1&&this[0].parentNode;D=V||{};if(d&&d.nodeType===11&&d.childNodes.length===1&&o.length===1){o[b](this[0]);c=this}else{for(f=0,r=o.length;f<r;f++){y=f;e=(f>0?this.clone(true):this).get();z.fn[b].apply(z(o[f]),e);c=c.concat(e)}y=0;c=this.pushStack(c,a,o.selector)}q=D;D=null;z.tmpl.complete(q);return c}});z.fn.extend({tmpl:function(a,f,e){return z.tmpl(this[0],a,f,e)},tmplItem:function(){return z.tmplItem(this[0])},template:function(a){return z.template(a,this[0])},domManip:function(c,n,e){if(c[0]&&c[0].nodeType){var a=z.makeArray(arguments),b=c.length,m=0,k;while(m<b&&!(k=z.data(c[m++],"tmplItem"))){}if(b>1){a[0]=[z.makeArray(c)]}if(k&&y){a[2]=function(d){z.tmpl.afterManip(this,d,e)}}F.apply(this,a)}else{F.apply(this,arguments)}y=0;!D&&z.tmpl.complete(V);return this}});z.extend({tmpl:function(b,l,f,a){var g,i=!a;if(i){a=H;b=z.template[b]||z.template(null,b);A={}}else{if(!b){b=a.tmpl;V[a.key]=a;a.nodes=[];a.wrapped&&R(a,a.wrapped);return z(Q(a,null,a.tmpl(z,a)))}}if(!b){return[]}if(typeof l==="function"){l=l.call(a||{})}f&&f.wrapped&&R(f,f.wrapped);g=z.isArray(l)?z.map(l,function(c){return c?B(f,a,b,c):null}):[B(f,a,b,l)];return i?z(Q(a,null,g)):g},tmplItem:function(d){var a;if(d instanceof z){d=d[0]}while(d&&d.nodeType===1&&!(a=z.data(d,"tmplItem"))&&(d=d.parentNode)){}return a||H},template:function(a,d){if(d){if(typeof d==="string"){d=S(d)}else{if(d instanceof z){d=d[0]||{}}}if(d.nodeType){d=z.data(d,"tmpl")||z.data(d,"tmpl",S(d.innerHTML))}return typeof a==="string"?(z.template[a]=d):d}return a?typeof a!=="string"?z.template(null,a):z.template[a]||z.template(null,I.test(a)?a:z(a)):null},encode:function(b){return(""+b).split("<").join("<").split(">").join(">").split('"').join('"').split("'").join("'")}});z.extend(z.tmpl,{tag:{tmpl:{_default:{$2:"null"},open:"if($notnull_1){_=_.concat($item.nest($1,$2));}"},wrap:{_default:{$2:"null"},open:"$item.calls(_,$1,$2);_=[];",close:"call=$item.calls();_=call._.concat($item.wrap(call,_));"},each:{_default:{$2:"$index, $value"},open:"if($notnull_1){$.each($1a,function($2){with(this){",close:"}});}"},"if":{open:"if(($notnull_1) && $1a){",close:"}"},"else":{_default:{$1:"true"},open:"}else if(($notnull_1) && $1a){"},html:{open:"if($notnull_1){_.push($1a);}"},"=":{_default:{$1:"$data"},open:"if($notnull_1){_.push($.encode($1a));}"},"!":{open:""}},complete:function(){V={}},afterManip:function(g,c,a){var h=c.nodeType===11?z.makeArray(c.childNodes):c.nodeType===1?[c]:[];a.call(g,c);U(h);y++}});function Q(a,j,i){var h,d=i?z.map(i,function(b){return typeof b==="string"?a.key?b.replace(/(<\w+)(?=[\s>])(?![^>]*_tmplitem)([^>]*)/g,"$1 "+C+'="'+a.key+'" $2'):b:Q(b,a,b._ctnt)}):a;if(j){return d}d=d.join("");d.replace(/^\s*([^<\s][^<]*)?(<[\w\W]+>)([^>]*[^>\s])?\s*$/,function(l,k,g,b){h=z(g).get();U(h);if(k){h=N(k).concat(h)}if(b){h=h.concat(N(b))}});return h?h:N(d)}function N(a){var d=document.createElement("div");d.innerHTML=a;return z.makeArray(d.childNodes)}function S(a){return new Function("jQuery","$item","var $=jQuery,call,_=[],$data=$item.data;with($data){_.push('"+z.trim(a).replace(/([\\'])/g,"\\$1").replace(/[\r\t\n]/g," ").replace(/\$\{([^\}]*)\}/g,"{{= $1}}").replace(/\{\{(\/?)(\w+|.)(?:\(((?:[^\}]|\}(?!\}))*?)?\))?(?:\s+(.*?)?)?(\(((?:[^\}]|\}(?!\}))*?)\))?\s*\}\}/g,function(w,v,s,q,k,n,r){var u=z.tmpl.tag[s],t,o,p;if(!u){throw"Template command not found: "+s}t=u._default||[];if(n&&!/\w$/.test(k)){k+=n;n=""}if(k){k=O(k);r=r?","+O(r)+")":n?")":"";o=n?k.indexOf(".")>-1?k+n:"("+k+").call($item"+r:k;p=n?o:"(typeof("+k+")==='function'?("+k+").call($item):("+k+"))"}else{p=o=t.$1||"null"}q=O(q);return"');"+u[v?"close":"open"].split("$notnull_1").join(k?"typeof("+k+")!=='undefined' && ("+k+")!=null":"true").split("$1a").join(p).split("$1").join(o).split("$2").join(q?q.replace(/\s*([^\(]+)\s*(\((.*?)\))?/g,function(e,g,f,h){h=h?","+h+")":f?")":"";return h?"("+g+").call($item"+h:e}):t.$2||"")+"_.push('"})+"');}return _;")}function R(a,d){a._wrap=Q(a,true,z.isArray(d)?d:[I.test(d)?d:z(d).html()]).join("")}function O(b){return b?b.replace(/\\'/g,"'").replace(/\\\\/g,"\\"):null}function G(d){var c=document.createElement("div");c.appendChild(d.cloneNode(true));return c.innerHTML}function U(h){var g="_"+y,d,c,q={},b,a,f;for(b=0,a=h.length;b<a;b++){if((d=h[b]).nodeType!==1){continue}c=d.getElementsByTagName("*");for(f=c.length-1;f>=0;f--){r(c[f])}r(d)}function r(s){var l,u=s,t,n,w;if(w=s.getAttribute(C)){while(u.parentNode&&(u=u.parentNode).nodeType===1&&!(l=u.getAttribute(C))){}if(l!==w){u=u.parentNode?u.nodeType===11?0:u.getAttribute(C)||0:0;if(!(n=V[w])){n=A[w];n=B(n,V[u]||A[u],null,true);n.key=++P;V[P]=n}y&&v(w)}s.removeAttribute(C)}else{if(y&&(n=z.data(s,"tmplItem"))){v(n.key);V[n.key]=n;u=z.data(s.parentNode,"tmplItem");u=u?u.key:0}}if(n){t=n;while(t&&t.key!=u){t.nodes.push(s);t=t.parent}delete n._ctnt;delete n._wrap;z.data(s,"tmplItem",n)}function v(e){e=e+g;n=q[e]=q[e]||B(n,V[n.parent.key+g]||n.parent,null,true)}}}function M(h,e,g,f){if(!h){return T.pop()}T.push({_:h,tmpl:e,item:this,data:g,options:f})}function K(a,f,e){return z.tmpl(z.template(a),f,e,this)}function E(e,a){var f=e.options||{};f.wrapped=a;return z.tmpl(z.template(e.tmpl),e.data,f,e.item)}function J(a,f){var e=this._wrap;return z.map(z(z.isArray(e)?e.join(""):e).filter(a||"*"),function(b){return f?b.innerText||b.textContent:b.outerHTML||G(b)})}function L(){var a=this.nodes;z.tmpl(null,null,null,this).insertBefore(a[0]);z(a).remove()}})(jQuery);